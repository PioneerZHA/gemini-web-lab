<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D äº¤äº’å¡ç‰Œ - ç»ˆæä¿®å¤ç‰ˆ</title>
    <style>
        :root {
            --card-width: 300px;
            --card-height: 420px;
            --card-radius: 16px;
            --accent-color: #00ffcc;
        }

        body {
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #111;
            background-image: radial-gradient(circle at 50% 50%, #2a2a2a 0%, #000 100%);
            font-family: sans-serif;
            overflow: hidden;
        }

        /* æ§åˆ¶é¢æ¿ */
        .controls {
            margin-bottom: 40px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background: rgba(0, 0, 0, 0.6);
            padding: 20px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            width: 90%;
            max-width: 400px;
        }
        
        .input-group { display: flex; gap: 10px; }
        
        input[type="text"] {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #444;
            color: #fff;
            padding: 8px;
            border-radius: 4px;
        }
        
        button, .file-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            text-align: center;
            font-size: 14px;
            transition: 0.2s;
        }
        
        button:hover, .file-btn:hover {
            background: var(--accent-color);
            color: #000;
        }
        
        input[type="file"] { display: none; }

        /* --- æ ¸å¿ƒç»“æ„ --- */

        /* 1. èˆå°å±‚ï¼šè´Ÿè´£é€è§†å’Œé¼ æ ‡ç›‘å¬ï¼Œæœ¬èº«ä¸æ—‹è½¬ */
        .scene {
            width: var(--card-width);
            height: var(--card-height);
            position: relative;
            perspective: 1200px; /* 3D è§†è· */
            z-index: 10;
            /* å°ºå¯¸å˜åŒ–æ—¶çš„å¹³æ»‘è¿‡æ¸¡ */
            transition: width 0.5s ease, height 0.5s ease; 
        }

        /* 2. å¡ç‰‡å±‚ï¼šè´Ÿè´£æ—‹è½¬ */
        .card {
            width: 100%;
            height: 100%;
            position: absolute;
            border-radius: var(--card-radius);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-image: url('https://images.unsplash.com/photo-1635322966219-b75ed372eb01?q=80&w=1000&auto=format&fit=crop');
            background-color: #000;
            
            /* å…³é”®ï¼šä¿ç•™3Dç©ºé—´ */
            transform-style: preserve-3d;
            will-change: transform;
            
            /* é˜´å½± */
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        /* çº¹ç†è¾¹æ¡† */
        .card::after {
            content: "";
            position: absolute;
            inset: 0;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: var(--card-radius);
        }

        /* 3. å…‰æ•ˆå±‚ */
        .card-glare, .card-shine {
            position: absolute;
            inset: 0;
            border-radius: var(--card-radius);
            pointer-events: none; /* å¿…é¡»ç©¿é€ï¼Œå¦åˆ™æŒ¡ä½é¼ æ ‡ */
            opacity: 0;
            transition: opacity 0.3s;
        }

        /* é«˜å…‰ */
        .card-glare {
            background: radial-gradient(
                farthest-corner circle at var(--pointer-x) var(--pointer-y),
                rgba(255, 255, 255, 0.8) 0%,
                rgba(255, 255, 255, 0.1) 40%,
                transparent 80%
            );
            mix-blend-mode: overlay;
        }

        /* é•­å°„ */
        .card-shine {
            background: linear-gradient(
                115deg,
                transparent 20%,
                rgba(0, 255, 204, 0.5) 45%,
                rgba(255, 0, 204, 0.5) 55%,
                transparent 80%
            );
            background-size: 300% 300%;
            background-position: var(--bg-x) var(--bg-y);
            mix-blend-mode: color-dodge;
        }
        
        .hint {
            position: absolute;
            bottom: -30px;
            color: #666;
            width: 100%;
            text-align: center;
            font-size: 12px;
        }

    </style>
</head>
<body>

    <div class="controls">
        <label for="fileIn" class="file-btn">ğŸ“‚ ä¸Šä¼ å›¾ç‰‡</label>
        <input type="file" id="fileIn" accept="image/*">
        
        <div class="input-group">
            <input type="text" id="urlIn" placeholder="è¾“å…¥å›¾ç‰‡é“¾æ¥...">
            <button id="loadBtn">åŠ è½½</button>
        </div>
    </div>

    <!-- å…³é”®ç»“æ„ï¼šScene åŒ…è£¹ Card -->
    <div class="scene" id="scene">
        <div class="card" id="card">
            <div class="card-shine"></div>
            <div class="card-glare"></div>
        </div>
        <div class="hint">æ­£åœ¨è¯»å–å›¾ç‰‡å°ºå¯¸...</div>
    </div>

    <script>
        const scene = document.getElementById('scene');
        const card = document.getElementById('card');
        const glare = document.querySelector('.card-glare');
        const shine = document.querySelector('.card-shine');
        const hint = document.querySelector('.hint');

        // --- æ ¸å¿ƒäº¤äº’é€»è¾‘ ---

        scene.addEventListener('mousemove', (e) => {
            // 1. é¼ æ ‡ç§»å…¥æ—¶ï¼Œå¿…é¡»ç¬é—´å“åº”ï¼Œä¸èƒ½æœ‰å»¶è¿Ÿ
            card.style.transition = 'none';

            const rect = scene.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            
            // æ—‹è½¬è®¡ç®—
            const rotateX = ((y - centerY) / centerY) * -15; // ä¸Šä¸‹ç¿»è½¬
            const rotateY = ((x - centerX) / centerX) * 15;  // å·¦å³ç¿»è½¬

            // åº”ç”¨å˜æ¢
            card.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.05, 1.05, 1.05)`;

            // å…‰æ•ˆè®¡ç®—
            card.style.setProperty('--pointer-x', `${x}px`);
            card.style.setProperty('--pointer-y', `${y}px`);
            
            const bgX = 50 + ((x / rect.width) * 50);
            const bgY = 50 + ((y / rect.height) * 50);
            card.style.setProperty('--bg-x', `${bgX}%`);
            card.style.setProperty('--bg-y', `${bgY}%`);

            // æ˜¾ç¤ºå…‰æ•ˆ
            glare.style.opacity = '1';
            shine.style.opacity = '1';
        });

        scene.addEventListener('mouseleave', () => {
            // 2. é¼ æ ‡ç¦»å¼€æ—¶ï¼Œå¼€å¯å¹³æ»‘è¿‡æ¸¡ï¼Œè®©å®ƒæ…¢æ…¢å›å¼¹
            card.style.transition = 'transform 0.6s cubic-bezier(0.23, 1, 0.32, 1)';
            
            card.style.transform = `rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`;
            glare.style.opacity = '0';
            shine.style.opacity = '0';
        });

        // --- å›¾ç‰‡åŠ è½½é€»è¾‘ ---
        
        const fileIn = document.getElementById('fileIn');
        const urlIn = document.getElementById('urlIn');
        const loadBtn = document.getElementById('loadBtn');

        function updateImage(src) {
            hint.style.opacity = '1';
            hint.textContent = "åŠ è½½ä¸­...";
            
            const img = new Image();
            img.onload = () => {
                const ratio = img.naturalWidth / img.naturalHeight;
                
                // é™åˆ¶æœ€å¤§å°ºå¯¸
                let h = 500;
                let w = h * ratio;
                if(w > window.innerWidth * 0.9) {
                    w = window.innerWidth * 0.9;
                    h = w / ratio;
                }

                // æ›´æ–° CSS å˜é‡ (æ§åˆ¶ Scene å¤§å°)
                document.documentElement.style.setProperty('--card-width', `${w}px`);
                document.documentElement.style.setProperty('--card-height', `${h}px`);
                
                // æ›´æ–°èƒŒæ™¯
                card.style.backgroundImage = `url('${src}')`;
                hint.style.opacity = '0';
            };
            img.onerror = () => {
                hint.textContent = "å›¾ç‰‡åŠ è½½å¤±è´¥ (å¯èƒ½æ˜¯è·¨åŸŸé™åˆ¶)";
            };
            img.src = src;
        }

        // ç›‘å¬äº‹ä»¶
        fileIn.addEventListener('change', (e) => {
            if(e.target.files[0]) {
                const reader = new FileReader();
                reader.onload = (ev) => updateImage(ev.target.result);
                reader.readAsDataURL(e.target.files[0]);
            }
        });

        loadBtn.addEventListener('click', () => {
            if(urlIn.value) updateImage(urlIn.value);
        });

        // åˆå§‹åŒ–æç¤ºéšè—
        hint.style.opacity = '0';
    </script>
</body>
</html>